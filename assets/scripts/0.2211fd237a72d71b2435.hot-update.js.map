{"version":3,"sources":["webpack:///./app/scripts/app.js?e48d"],"names":["$","document","on","find","val","parents","html","hover","addClass","removeClass","setCookie","name","value","options","expires","d","Date","setTime","getTime","toUTCString","encodeURIComponent","updatedCookie","propName","propValue","cookie","mask","$form","$btn","errors","each","$val","yaCounter","reachGoal","$btnText","text","$method","attr","$action","formData","FormData","ajax","type","url","data","processData","contentType","success","path","window","location","href","error","setTimeout","console","log","loadFiles","sendData","cache","dataType","xhr","ajaxSettings","upload","addEventListener","evt","lengthComputable","slideDown","progress","parseInt","loaded","total","css","respond","textStatus","jqXHR","slideUp","files_path","key","errorThrown","pathname","search","fancybox","files","append","self","parent","serialize","remove"],"mappings":"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","file":"0.2211fd237a72d71b2435.hot-update.js","sourcesContent":["import initNavScripts from '../blocks/nav/nav.js'\nimport initAboutScripts from '../blocks/main-about/about.js'\nimport initModalsScripts from '../blocks/modals/modals.js'\nimport initFiltersScripts from '../blocks/gallery/filters.js'\nimport initPaginationScripts from '../blocks/catalog/pagination.js';\n\n\n;(() => {\n\tinitNavScripts();\n\tinitAboutScripts();\n\tinitModalsScripts();\n\tinitFiltersScripts();\n\tinitPaginationScripts();\n\t\n\t$(document).on('click', '.actions-offer__btn', function() {\n\t\t$('[data-remodal-id=action]').find('input[name=\"form\"]').val('Акция - ' + $(this).parents('.actions-offer').find('.actions-offer__title').html());\n\t});\n\t\n\t$('.actions-offer__btn').hover(\n\t\tfunction(){\n\t\t\t$(this).parents('.actions-offer').find('img').addClass('active');\n\t\t},\n\t\tfunction(){\n\t\t\t$(this).parents('.actions-offer').find('img').removeClass('active');\n\t });\n\t\n\t//helper\n\tfunction setCookie(name, value, options) {\n\t\toptions = options || {};\n\t\tvar expires = options.expires;\n\t\tif (typeof expires == \"number\" && expires) {\n\t\t\tvar d = new Date();\n\t\t\td.setTime(d.getTime() + expires * 1000);\n\t\t\texpires = options.expires = d;\n\t\t}\n\t\tif (expires && expires.toUTCString) {\n\t\t\toptions.expires = expires.toUTCString();\n\t\t}\n\t\tvar val = encodeURIComponent(value);\n\t\tvar updatedCookie = name + \"=\" + val;\n\t\tfor (var propName in options) {\n\t\t\tupdatedCookie += \"; \" + propName;\n\t\t\tvar propValue = options[propName];\n\t\t\tif (propValue !== true) {\n\t\t\t\tupdatedCookie += \"=\" + propValue;\n\t\t\t}\n\t\t}\n\t\tdocument.cookie = updatedCookie;\n\t}\n\n\t$('input[type=\"tel\"]').mask('+7(999)999-99-99');\n\t\t\n\t$(document).on('focus click', '.required', function() {\n\t\t$(this).removeClass('error');\n\t});\n\t\n\t//handler\n\t$(document).on('click', 'button[type=\"submit\"]', function () {\n\n\t\tconst $form =  $(this).parents('form');\n\t\tlet $btn = $(this);\n\t\tlet errors = false;\n\t\t\n\t\t$form.find('.required').each(function() {\n\t\t\tlet $val = $(this).val();\n\t\t\t\tif(!$val) {\n\t\t\t\t\t$(this).addClass('error');\n\t\t\t\t\terrors = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\tif(errors == false) {\n\t\t\tyaCounter.reachGoal('order');\n\t\t\t\n\t\t\tlet $btnText = $btn.text();\n\t\t\t$btn.text('Обработка данных...');\n\n\t\t\tconst $method = $form.attr('method');\n\t\t\tconst $action = $form.attr('action');\n\t\t\tconst formData = new FormData($(this).parents('form')[0]);\n\n\t\t\t$.ajax({\n\t\t\t\ttype: $method,\n\t\t\t\turl: $action,\n\t\t\t\tdata: formData,\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false,\n\t\t\t\tsuccess: function(data) {\n\t\t\t\t\tsetCookie('empty', 'val', { path: '/' });\n\t\t\t\t\twindow.location.href = '/thank.html';\n\t\t\t\t\t$btn.text($btnText);\n\t\t\t\t},\n\t\t\t\terror: function(data) {\n\t\t\t\t\t$btn.text('Ошибка');\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t$btn.text($btnText);\n\t\t\t\t\t}, 2000);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.log('Error');\n\t\t}\n\t\treturn false;\n\t});\n\t\n\tfunction loadFiles(data) {\n\t\t\tvar sendData = '';\n\t\n\t\t\tif (data) {\n\t\t\t\tsendData = data;\n\t\t\t} else {\n\t\t\t\tsendData = '';\n\t\t\t}\n\t\t\t$.ajax({\n\t\t\t\turl: '/assets/templates/content/upload.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: sendData,\n\t\t\t\tcache: false,\n\t\t\t\tdataType: 'json',\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false,\n\t\t\t\txhr: function xhr() {\n\t\t\t\t\tvar xhr = $.ajaxSettings.xhr();\n\t\t\t\t\txhr.upload.addEventListener('progress', function (evt) {\n\t\t\t\t\t\tif (evt.lengthComputable) {\n\t\t\t\t\t\t\t$('.progress .progress-bar').slideDown();\n\t\t\t\t\t\t\tvar progress = parseInt(evt.loaded / evt.total * 100);\n\t\t\t\t\t\t\t$('.progress .progress-bar').css('width', progress + '%');\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\t\t\t\t\treturn xhr;\n\t\t\t\t},\n\t\t\t\tsuccess: function success(respond, textStatus, jqXHR) {\n\t\t\t\t\tif (typeof respond.error === 'undefined') {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t$('.progress .progress-bar').slideUp();\n\t\t\t\t\t\t\t$('.progress .progress-bar').css('width', '0');\n\t\t\t\t\t\t}, 600);\n\t\t\t\t\t\tvar files_path = respond;\n\t\t\t\t\t\tvar html = '';\n\t\t\t\t\t\t$.each(files_path, function (key, val) {\n\t\t\t\t\t\t\thtml += '<div class=\"file-item\"><div class=\"text\">' + val +'</div><div class=\"delfile\"></div></div>';\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$('.files').html(html);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('Ошибка°: ' + respond.error);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function error(jqXHR, textStatus, errorThrown) {\n\t\t\t\t\tconsole.log('Ошибка°: ' + textStatus);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\n\t\tdocument.addEventListener('DOMContentLoaded', function () {\n\t\t\tloadFiles();\n\t\t\tif(window.location.pathname.search(/ogrady/) != -1) {\n\t\t\t\t\t$('.char li:eq(3)').addClass('another');\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t$('.open-gallery').fancybox();\n\t\t});\n\t\n\t\tvar files = '';\n\t\n\t\t$(document).on('change', 'input[type=file]', function () {\n\t\n\t\t\tfiles = this.files;\n\t\n\t\t\tvar data = new FormData();\n\t\n\t\t\t$.each(files, function (key, value) {\n\t\t\t\tdata.append(key, value);\n\t\t\t});\n\t\n\t\t\tloadFiles(data);\n\t\t});\n\t\n\t\t$(document).on('click', '.delfile', function () {\n\t\t\tvar self = this;\n\t\t\tvar name = $(self).parent().find('.text').html();\n\t\t\t$('#nameDel').val(name);\n\t\t\tvar data = $(this).parents('form').serialize();\n\t\t\t$.ajax({\n\t\t\t\turl: '/assets/templates/content/delete.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: data,\n\t\t\t\tcache: false,\n\t\t\t\tsuccess: function success(respond, textStatus, jqXHR) {\n\t\t\t\t\tif (respond == 'success') {\n\t\t\t\t\t\t$(self).parent().remove();\n\t\t\t\t\t\t$('input[type=file]').val('');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function error(respond, textStatus, errorThrown) {\n\t\t\t\t\tconsole.log(textStatus);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/app.js"],"sourceRoot":""}